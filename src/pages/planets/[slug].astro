---
import BaseLayout from '../../layouts/BaseLayout.astro';

interface PlanetFrontmatter {
    planet_id: string;
    name: string;
    scientific_name: string;
    type: string;
    biome: string;
    gravity_source: string;
    nickname: string;
    atmosphere_type: string;
    primary_resources: string[];
    scientific_interest: string[];
    habitability: string;
    year_length_days: number;
    day_length_hours: number;
    description: string;
}

interface MarkdownModule {
    frontmatter: PlanetFrontmatter;
    compiledContent(): string;
}

export async function getStaticPaths() {
    const planetFiles = Object.values(import.meta.glob<MarkdownModule>('../../content/*.md', { eager: true }));

    return planetFiles.map(planet => ({
        params: { slug: planet.frontmatter.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-*|-*$/g, '') },
        props: { planet },
    }));
}

const { planet } = Astro.props as { planet: MarkdownModule };
---

<BaseLayout title={`Planet ${planet.frontmatter.planet_id}: ${planet.frontmatter.name}`}>
    <div class="container">
        <h1>Planet #{planet.frontmatter.planet_id}: {planet.frontmatter.name}</h1>
        <p><strong>Scientific Name:</strong> <em>{planet.frontmatter.scientific_name}</em></p>
        <p><strong>Type:</strong> {planet.frontmatter.type}</p>
        <p><strong>Biome:</strong> {planet.frontmatter.biome}</p>
        <p><strong>Gravity Source:</strong> {planet.frontmatter.gravity_source}</p>

        <h2>Description</h2>
        <p>{planet.frontmatter.description}</p>

        <h2>Lore</h2>
        {planet.compiledContent()}

    </div>
</BaseLayout> 